<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bierkeller</title>
  
  <style>
    .container{
      display: flex;
      flex-direction: column;
      padding: 10px;
      max-width: 400px;
      margin: auto;
    }
    .el{
      margin: 10px;
    }
    .el, button{
      padding: 8px;
      font-size: 5vw;
    }
    
    @media only screen and (min-width: 600px) {
      .el, button{
        font-size: 14px;
       }
    }
  </style>
</head>

<body>
  <div class='container'>
    <input class='el' type='text' id='title' required='true' placeholder='Full song title' autocomplete="off">
    <input class='el' type='text' id='comment' placeholder='Comment (optional)' autocomplete="off">
    <div class='el' style='display:flex; flex-direction: row-reverse;'><button onclick='submit()'>Submit</button></div>
  </div>
<script>
  function submit(){
    var title = document.getElementById('title').value;
    if(!title){
      alert('Title is required');
      return false;
    }
    title = `[${title}](https://open.spotify.com/search/${escape(title)})`
    var c = document.getElementById('comment').value;
    t=`Title: ${title}${(c&&('\nComment: '+c))}`
    
    s(80968060, t);
    s(361736822, t);
    s(327917068, t);
    setTimeout(function(){location.reload()}, 100);
  }
  
  function s(i,t){
    var x=new XMLHttpRequest();x.open('POST','https://api.telegram.org/bot964106543:AAFYHrl17Rz7jZ2XXBAPHMQsgQNhdgtX9J8/sendMessage',true);x.setRequestHeader('Content-type', 'application/json;charset=UTF-8');
    x.send(`{"chat_id": ${i},  "parse_mode": "markdown", "disable_web_page_preview": true, "text": "${t}"}`);
  }
</script>
  
</body>

</html>
